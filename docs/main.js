(()=>{"use strict";const e=document.querySelector(".menu-icon"),t=document.querySelector(".aside"),n=document.querySelectorAll(".playlist li"),a=document.getElementById("play"),i=document.getElementById("next"),s=document.getElementById("prev"),c=document.getElementById("audio");let o=c.classList.contains("active");const r=document.querySelector(".player__info img"),l=document.querySelector("#title"),d=document.querySelector(".band"),u=document.querySelector(".bar"),m=document.querySelector(".bar__thumb"),g=document.getElementById("duration"),p=document.querySelector(".repeat"),v=[{album:"https://upload.wikimedia.org/wikipedia/en/e/ed/Lamb_of_God_-_VII_Sturm_und_Drang.jpg",name:"Delusion Pandemic"},{album:"https://upload.wikimedia.org/wikipedia/en/e/e0/LOG_Resolution.jpg",name:"Ghost Walking"},{album:"https://upload.wikimedia.org/wikipedia/en/f/fc/Lamb_of_God_-_Lamb_of_God.jpg",name:"Checkmate"}];let L=0;function y(e){"Delusion Pandemic"==e.innerText?(L=0,r.src=v[0].album):"Ghost Walking"==e.innerText?(r.src=v[1].album,L=1):(L=2,r.src=v[2].album)}function f(){c.play(),c.classList.add("active"),a.classList.remove("fa-play"),a.classList.add("fa-pause")}function E(){o&&(L++,L>v.length-1&&(L=0),c.src=`./assets/songs/${v[L].name}.mp3`.replaceAll(" ",""),l.innerText=`${v[L].name}`,y(l),f(),document.querySelector("li.song-active").classList.remove("song-active"),n.forEach((e=>{e.children[0].innerText==v[L].name&&(console.log("current song:",v[L].name),e.classList.add("song-active"))})))}e.addEventListener("click",(()=>t.classList.toggle("aside-active"))),n.forEach((e=>{e.addEventListener("click",(function(){var t;o=!0,t=e.firstElementChild,l.innerText=t.innerText,r.style.borderRadius="10px",y(l),d.style.opacity="1",l.style.opacity="1",c.src=`./assets/songs/${l.innerText}.mp3`.replaceAll(" ",""),f();const n=document.querySelector("li.song-active");n&&n.classList.remove("song-active"),e.classList.add("song-active")}))})),s.addEventListener("click",(function(){o&&(L--,L<0&&(L=v.length-1),c.src=`./assets/songs/${v[L].name}.mp3`.replaceAll(" ",""),l.innerText=`${v[L].name}`,y(l),f(),document.querySelector("li.song-active").classList.remove("song-active"),n.forEach((e=>{e.children[0].innerText==v[L].name&&(console.log("current song:",v[L].name),e.classList.add("song-active"))})))})),i.addEventListener("click",E),a.addEventListener("click",(()=>{o&&(c.paused?f():(c.pause(),a.classList.add("fa-play"),a.classList.remove("fa-pause")))})),c.addEventListener("timeupdate",(function(e){if(o){const{duration:t,currentTime:n}=e.target,a=n/t*100;m.style.width=`${a}%`;let i=parseInt(c.currentTime/60%60),s=parseInt(c.currentTime%60);s<10&&(s="0"+s),g.textContent=`${i}:${s}`}})),u.addEventListener("click",(function(e){const t=this.clientWidth,n=e.offsetX,a=c.duration;c.currentTime=n/t*a})),c.addEventListener("ended",(()=>{p.classList.contains("repeat-active")?(c.currentTime=0,f()):E()})),p.addEventListener("click",(()=>{o&&p.classList.toggle("repeat-active")})),document.addEventListener("click",(e=>{e.target.classList.contains("link")&&e.preventDefault()}))})();